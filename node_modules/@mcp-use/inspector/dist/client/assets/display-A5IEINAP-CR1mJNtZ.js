const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Ct4b1Obu.js","assets/index-CTPvdefa.js","assets/index-DQ7i0BFM.css"])))=>i.map(i=>d[i]);
import{_ as a,a as k}from"./index-CTPvdefa.js";var y=null,L=null,O=null,J=!1,V=typeof process<"u"&&process.versions?.node;(async()=>{if(V)try{O=(await k(()=>import("./util-t-trnxQI.js").then(e=>e.u),[])).stripVTControlCharacters}catch{}try{y=(await k(()=>import("./index-JiKw9JSs.js"),[])).default}catch{}try{L=(await k(()=>import("./index-Ct4b1Obu.js").then(e=>e.i),__vite__mapDeps([0,1,2]))).highlight}catch{}V&&(!y||!L)&&(J||(J=!0,console.warn(`
âœ¨ For enhanced console output with colors and syntax highlighting, install:

  npm install chalk cli-highlight
  # or
  pnpm add chalk cli-highlight
`)))})();var B=process.stdout.columns||120,p={gray:a(t=>y?.gray(t)??t,"gray"),bold:{white:a(t=>y?.bold?.white(t)??t,"white")},bgGray:a(t=>y?.bgGray(t)??t,"bgGray"),cyan:a(t=>y?.cyan(t)??t,"cyan"),dim:a(t=>y?.dim(t)??t,"dim"),red:a(t=>y?.red(t)??t,"red"),green:a(t=>y?.green(t)??t,"green")};function D(t,e){if(!L)return t;try{return L(t,{language:e??"javascript",ignoreIllegals:!0})}catch{return t}}a(D,"highlightCode");function w(t){return O?O(t):t.replace(/\x1b\[[0-9;]*m/g,"")}a(w,"stripAnsi");function G(t,e){if(w(t).length<=e)return[t];const o=[];let r=0,s="",c=0;for(;c<t.length;){const i=t[c];if(i==="\x1B"){let n=i;for(c++;c<t.length;){const d=t[c];if(n+=d,c++,d==="m")break}s+=n;continue}s+=i,r++,c++,r>=e&&(o.push(s),s="",r=0)}return s&&o.push(s),o}a(G,"wrapAnsiLine");function g(t,e,l,o=!1){const r=B;let s=t;if(l)try{s=D(t,l)}catch{}const c=s.split(`
`).flatMap(i=>G(i,r-4));if(console.log(p.gray("â”Œ"+"â”€".repeat(r-2)+"â”")),e){const i=w(e),n=`${e} `,d=Math.max(0,r-4-i.length-2);console.log(p.gray("â”‚ ")+p.bold.white(n)+" ".repeat(d)+p.gray(" â”‚")),console.log(p.gray("â”œ"+"â”€".repeat(r-2)+"â”¤"))}c.forEach(i=>{const n=w(i),d=Math.max(0,r-4-n.length),$=o?p.bgGray(i+" ".repeat(d)):i+" ".repeat(d);console.log(p.gray("â”‚ ")+$+p.gray(" â”‚"))}),console.log(p.gray("â””"+"â”€".repeat(r-2)+"â”˜"))}a(g,"printBox");function H(t){if(typeof t=="object"&&t!==null&&"code"in t){const e=t;return typeof e.code=="string"?e.code:null}return null}a(H,"extractCodeFromToolInput");function I(t){if(typeof t!="object"||t===null)return!1;const e=t;return"result"in e&&"logs"in e&&Array.isArray(e.logs)&&"execution_time"in e&&typeof e.execution_time=="number"&&"error"in e&&(typeof e.error=="string"||e.error===null)}a(I,"isExecuteCodeResult");function N(t){try{if(typeof t=="string"){const e=JSON.parse(t);if(I(e))return e}if(I(t))return t}catch{}return null}a(N,"parseExecuteCodeResult");function _(t){return t==null?"null":typeof t=="object"?JSON.stringify(t,null,2):String(t)}a(_,"renderContent");function W(t){if(typeof t=="object"&&t!==null&&"input"in t){const e=t;if(typeof e.input=="string")try{return JSON.parse(e.input)}catch{return e.input}}return t}a(W,"unwrapToolInput");function q(t){const e=t.name||"unknown";let l=t.data?.input||{};l=W(l);const o=H(l);if(o){g(o,`${e} - input`,"javascript",!1);const r={...l};delete r.code,Object.keys(r).length>0&&g(_(r),"Other Parameters","json",!1)}else g(_(l),`${e} - input`,"json",!1)}a(q,"handleToolStart");function K(t){try{if(typeof t=="object"&&t!==null&&"name"in t&&"content"in t){const e=t,l=(typeof e.name=="string"?e.name:null)||"unknown",r=e.lc_kwargs?.status||e.status||"unknown";let s=e.content;if(typeof s=="string")try{s=JSON.parse(s)}catch{}return{toolName:l,status:r,content:s}}}catch{}return null}a(K,"extractToolMessageContent");function P(t,e,l){const o=[];if(e&&(e.total_tools!==void 0&&o.push(`Total tools: ${e.total_tools}`),e.namespaces&&e.namespaces.length>0&&o.push(`Namespaces: ${e.namespaces.join(", ")}`),e.result_count!==void 0&&o.push(`Results: ${e.result_count}`)),!Array.isArray(t)||t.length===0){const i=l?`No tools found for query "${l}"`:"(no tools found)";return o.length>0?`${o.join(`
`)}

${i}`:i}const r={};for(const i of t){const n=i.server||"unknown";r[n]||(r[n]=[]),r[n].push(i)}const s=[];e&&(e.total_tools!==void 0&&s.push(`Total tools: ${e.total_tools}`),e.namespaces&&e.namespaces.length>0&&s.push(`Namespaces: ${e.namespaces.join(", ")}`),e.result_count!==void 0&&s.push(`Results: ${e.result_count}`),s.length>0&&s.push(""));const c=Object.keys(r).sort();for(let i=0;i<c.length;i++){const n=c[i],d=r[n],$=i===c.length-1,m=$?"â””â”€":"â”œâ”€";s.push(`${m} ${p.cyan(n)} (${d.length} tools)`);for(let j=0;j<d.length;j++){const A=d[j],R=j===d.length-1,E=$?"  ":"â”‚ ",u=`${E}${R?"â””â”€":"â”œâ”€"} ${A.name}`;if(s.push(u),A.description){const h=`${E}${R?"   ":"â”‚  "}`,C=w(h).length,v=Math.max(40,B-C-4),T=A.description.split(/(\s+)/),b=[];let x="";for(const M of T){const F=x+M;w(F).length<=v?x=F:(x&&b.push(x.trimEnd()),x=M.trimStart())}x&&b.push(x.trimEnd());for(const M of b)s.push(`${h}${p.dim(M)}`)}}}return s.join(`
`)}a(P,"formatSearchToolsAsTree");function z(t){const e=t.data?.output,l=K(e);if(l){const{toolName:c,status:i,content:n}=l;if(c==="execute_code"){let S=n;if(typeof n=="object"&&n!==null&&"content"in n){const f=n.content;Array.isArray(f)&&f.length>0&&f[0].type==="text"&&f[0].text&&(S=f[0].text)}const u=N(S);if(u){const h=`${u.execution_time?Math.round(u.execution_time*1e3):0}ms`,v=u.error!==null&&u.error!==void 0&&u.error!==""?p.red("error"):p.green("success"),T=`${c} - ${v} - ${h}`;if(u.result!==null&&u.result!==void 0){const b=_(u.result),x=typeof u.result=="object"?"json":void 0;g(b,T,x,!1)}else g("(no result)",T,void 0,!1);u.logs&&u.logs.length>0&&g(u.logs.join(`
`),"Logs",void 0,!1),u.error&&g(u.error,p.red("Error"),void 0,!1);return}}if(c==="search_tools"){const u=t.data?.input?.query;let f=n;if(typeof n=="object"&&n!==null&&!Array.isArray(n)&&"content"in n){const h=n.content;if(Array.isArray(h)&&h.length>0&&h[0].type==="text"&&h[0].text)try{f=JSON.parse(h[0].text)}catch{f=h[0].text}}if(typeof f=="object"&&f!==null&&!Array.isArray(f)&&"results"in f&&Array.isArray(f.results)){const h=f.results,v=f.meta,T=P(h,v,u),x=`${i==="success"?y.green("Success"):y.red("Error")}: ${c} - Result`;g(T,x,void 0,!1);return}if(Array.isArray(f)){const h=P(f,void 0,u),v=`${i==="success"?y.green("Success"):y.red("Error")}: ${c} - Result`;g(h,v,void 0,!1);return}}const d=typeof n=="object"&&n!==null?n:null,$=d&&"isError"in d&&d.isError===!0||i==="error";let m=n;typeof n=="object"&&n!==null&&"content"in n&&(m=n.content,Array.isArray(m)&&m.length>0&&m[0].type==="text"&&m[0].text&&(m=m[0].text));const j=_(m),A=typeof m=="object"?"json":void 0,E=`${i==="success"?p.green("Success"):$?p.red("Error"):"Result"}: ${c} - Result`;g(j,E,A,!1);return}const o=N(e);if(o){const i=`${o.execution_time?Math.round(o.execution_time*1e3):0}ms`;if(o.result!==null&&o.result!==void 0){const n=_(o.result),d=typeof o.result=="object"?"json":void 0;g(n,`Result - ${i}`,d,!1)}o.logs&&o.logs.length>0&&g(o.logs.join(`
`),"Logs",void 0,!1),o.error&&g(o.error,p.red("Error"),void 0,!1);return}const r=_(e);g(r,"Result",typeof e=="object"?"json":void 0,!1)}a(z,"handleToolEnd");async function*Q(t){let e="",l=!0,o=!1;for await(const r of t){if(r.event==="on_tool_start")o&&(process.stdout.write(`
`),o=!1,l=!0),q(r);else if(r.event==="on_tool_end")z(r);else if(r.event==="on_chat_model_stream"&&r.data?.chunk?.text){const s=r.data.chunk.text;typeof s=="string"&&s.length>0&&(l&&(process.stdout.write(`
ðŸ¤– `),l=!1),process.stdout.write(s),e+=s,o=!0)}yield}return e}a(Q,"prettyStreamEvents");export{H as extractCodeFromToolInput,K as extractToolMessageContent,P as formatSearchToolsAsTree,z as handleToolEnd,q as handleToolStart,N as parseExecuteCodeResult,Q as prettyStreamEvents,g as printBox,_ as renderContent,W as unwrapToolInput};
